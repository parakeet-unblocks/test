(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4522],{53325:function(e){e.exports=function(e,t){return e>t}},6162:function(e,t,n){var i=n(56029),o=n(53325),r=n(6557);e.exports=function(e){return e&&e.length?i(e,r,o):void 0}},33960:function(e,t){"use strict";t.Z={src:"/_next/static/media/now-bux-icon-3.8f36fd75.webp",height:38,width:39,blurDataURL:"data:image/webp;base64,UklGRq4AAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDsAAAABYFtbW5N3qKlDDTWbYE5bO4Iz6AAe8g4RoTZtA8aeUi4BORwG8E+M74q4Y4zxU/aP1ct19KG/gAyHBgBWUDggTAAAABACAJ0BKggACAACQDglsAJ0ugADGhs4f+AA/vYkywKLxXvtaczRnOz7jez1bsg5BXLQrH/0YkPxAPb6z/8qJ3bP+r3A1YEJzLSgAAA=",blurWidth:8,blurHeight:8}},62252:function(e,t){"use strict";t.Z={src:"/_next/static/media/now-premium-symbol.f6322625.webp",height:73,width:73,blurDataURL:"data:image/webp;base64,UklGRrwAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDQAAAABYBRJkqLxsfsC1fyiO1PMZGFRRERMALD+/3sK5I4xxpu42LRH69ham2kZvFQLBsSHQSAAVlA4IGIAAAAQAgCdASoIAAgAAkA4JbACdAEegm7FtxoAAP7PbAiVU+f/dp9rQLBk3PmTzglv2EiWGKenOkzxLmXLJkkwytGNS/EFNzyHMyitOytOjv/M97zv/NkfjXb5T2Dax3vNqUgAAA==",blurWidth:8,blurHeight:8}},85886:function(e,t){"use strict";t.Z={src:"/_next/static/media/redirect-arrow.e966dafd.webp",height:64,width:65,blurDataURL:"data:image/webp;base64,UklGRnoAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDQAAAABYBPbVpxbsvuAjoqSwUjmO8imAUtZdEVCwENETABztYhIGqxfBwjv+fNPLR3U1Rhk8JE5VlA4ICAAAAAwAQCdASoIAAgAAkA4JaQAA3AA/vqCFaWCLWn34AAAAA==",blurWidth:8,blurHeight:8}},50989:function(e,t,n){"use strict";n.d(t,{Z:function(){return eb}});var i=n(85893),o=n(4374),r=n(67294),l=n(1857),c=n(42771),a=n(66972),s={src:"/_next/static/media/secure-payment.24624943.webp",height:128,width:286,blurDataURL:"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAADQAQCdASoIAAQAAkA4JZwCdAEf/83+BAD++UBfok++SakxlrvuYPjf1VIWyZEB45TAAA==",blurWidth:8,blurHeight:4},d={src:"/_next/static/media/secure-ssl-payment.ec254ed3.webp",height:128,width:345,blurDataURL:"data:image/webp;base64,UklGRmoAAABXRUJQVlA4WAoAAAAQAAAABwAAAgAAQUxQSBkAAAAAHTwAAAAAAACQyW90YXB7YX2/Uk5QUElLAFZQOCAqAAAAkAEAnQEqCAADAAJAOCWkAALnUAwQAP6F4aTev58SmEXSlH9P+gT/AAAA",blurWidth:8,blurHeight:3},p=n(33960),u={src:"/_next/static/media/info.ee0dbd1b.webp",height:64,width:64,blurDataURL:"data:image/webp;base64,UklGRp4AAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSEEAAAAAACmgoaGiKQAppw8AAA+nKaIPAEhHAA+goQAALi4AAKGhAABQUAAAoaAPAEpKAA+iKacPAAAPpykAKaKhoaApAABWUDggNgAAANABAJ0BKggACAACQDglqAJ0ugEt/A9QAP7x/9/87UO1Y1R/8NBB/bR+Of8zgvlwa6LCeAAAAA==",blurWidth:8,blurHeight:8},h=n(85433),A=n(81069),x=n(36887),g=n(83530),f=n(21038),m=n(6284),w=n(85470),y=n(62252),b=n(94183),v=n(51315),j=n(77289),P=n(77621),I=n(84502),C=n(81043),S=n(82492),k=n(27633),T=n(44314),U=n(15431),Z=n(6162),N=n.n(Z),E=n(53632),Q=n.n(E),B=n(64489),R=n(57833);let D=R.ZP.div.withConfig({componentId:"sc-baee8b42-0"})(["display:flex;width:360px;min-height:505px;flex-direction:column;align-items:center;flex-shrink:0;border-radius:12px;border:1px solid ",";background:rgba(0,0,0,0.05);backdrop-filter:blur(60px);max-width:100%;&.landscape{height:100%;width:100%;min-height:380px;border:none;align-self:baseline;border-radius:0px;}&.jpHomePage{border:none;}"],e=>{let{theme:t}=e;return t.colors.white10}),L=R.ZP.div.withConfig({componentId:"sc-baee8b42-1"})(["display:flex;padding:11px 12px 11px 20px;justify-content:space-between;align-items:center;align-self:stretch;background:",";color:",";border-radius:12px 12px 0px 0px;&.landscape{border-radius:0px;}&.jpHomePage{border:1px solid ",";}i{cursor:pointer;padding:4px;border-radius:6px;&:hover{background:",";}}"],e=>{let{theme:t}=e;return t.colors.white20},e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.colors.white10},e=>{let{theme:t}=e;return t.colors.white10}),W=R.ZP.div.withConfig({componentId:"sc-baee8b42-2"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px 20px;width:100%;gap:20px;&.landscape{border-radius:0px;flex-direction:row;padding:24px;gap:40px;height:100%;}&.small{overflow:auto;}button{height:56px;width:100%;}"]),H=R.ZP.div.withConfig({componentId:"sc-baee8b42-3"})(["display:flex;flex-direction:row;align-items:center;gap:12px;width:100%;color:",";&.landscape{h3{font-size:20px;font-weight:600;line-height:150%;}}&.paymentTypes{flex-direction:column;text-align:center;}&.row{flex-direction:row;}.now-bux-img{width:32px;height:32px;}.now-prime-img{width:56px;height:56px;}"," &.purchase-now-bux.landscape{flex-direction:column;gap:0;}"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{paymentInProgress:t}=e;return t?(0,R.iv)(["justify-content:center;div{flex:unset;}"]):(0,R.iv)(["div{flex:1;}"])}),z=R.ZP.div.withConfig({componentId:"sc-baee8b42-4"})(["display:flex;flex-direction:column;align-items:center;gap:8px;width:100%;color:",";&.landscape{border-radius:24px;border:1px solid ",";padding:16px;}"],e=>{let{theme:t}=e;return t.colors.caution},e=>{let{theme:t}=e;return t.colors.white10}),_=R.ZP.div.withConfig({componentId:"sc-baee8b42-5"})(["display:flex;flex-direction:column;flex:1;"]),J=R.ZP.div.withConfig({componentId:"sc-baee8b42-6"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;gap:12px;flex:1 0 0;align-self:stretch;color:",";align-items:flex-start;margin-bottom:16px;"],e=>{let{theme:t}=e;return t.colors.white}),O=R.ZP.div.withConfig({componentId:"sc-baee8b42-7"})(["display:flex;padding:7px 12px;justify-content:space-between;align-items:center;align-self:stretch;border-radius:4px;border:1px solid ",";gap:8px;cursor:pointer;img{width:48px;height:28px;margin:4px 0px;}p{flex:1;}&.selected{border:1px solid ",";background:",";}"],e=>{let{theme:t}=e;return t.colors.white10},e=>{let{theme:t}=e;return t.colors.ascent},e=>{let{theme:t}=e;return t.colors.white10}),F=R.ZP.div.withConfig({componentId:"sc-baee8b42-8"})(["background:rgba(255,255,255,0.1);height:1px;width:100%;"]),q=R.ZP.div.withConfig({componentId:"sc-baee8b42-9"})(["display:flex;flex-direction:row;gap:6px;color:",";align-items:center;justify-content:center;width:100%;div{margin:0px;}"],e=>{let{theme:t}=e;return t.colors.white}),V=R.ZP.div.withConfig({componentId:"sc-baee8b42-10"})(["display:flex;flex-direction:column;align-items:center;gap:8px;color:",";&.landscape{max-width:320px;align-self:center;}h3{font-size:20px;font-weight:700;}p{color:",";text-align:center;}"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.colors.white70}),Y=R.ZP.div.withConfig({componentId:"sc-baee8b42-11"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;align-self:center;width:128px;height:128px;color:",";svg{position:absolute;top:0;left:0;width:128px;height:128px;transform:translate(12px,-17px) rotateZ(-90deg);overflow:visible;}&.landscape-modal{justify-content:flex-start;svg{width:95px;height:95px;}}"],e=>{let{theme:t}=e;return t.colors.white}),G=R.ZP.div.withConfig({componentId:"sc-baee8b42-12"})(["display:flex;flex-direction:column;align-items:center;gap:8px;color:",";margin-top:8px;"],e=>{let{theme:t}=e;return t.colors.white}),M=R.ZP.div.withConfig({componentId:"sc-baee8b42-13"})(["display:flex;flex-direction:row;gap:8px;align-items:center;justify-content:center;flex-wrap:wrap;row-gap:0px;a{text-decoration:none;}"]),X=(0,R.F4)(["0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}"]),K=R.ZP.img.withConfig({componentId:"sc-baee8b42-14"})(["animation:"," 1s linear infinite;align-self:center;width:72px;height:72px;margin:24px 0px;"],X),$=R.ZP.div.withConfig({componentId:"sc-baee8b42-15"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:12px;align-self:stretch;color:",";align-items:flex-start;margin-bottom:24px;height:156px;overflow-y:scroll;padding-right:4px;&::-webkit-scrollbar{display:block;width:4px;}::-webkit-scrollbar-thumb{background:",";border-radius:10px;}"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.colors.white20}),ee=R.ZP.div.withConfig({componentId:"sc-baee8b42-16"})(["display:flex;align-items:center;justify-content:center;gap:12px;opacity:0.6;align-self:normal;"]),et=R.ZP.img.withConfig({componentId:"sc-baee8b42-17"})(["height:32px;mix-blend-mode:lighten;"]),en=R.ZP.div.withConfig({componentId:"sc-baee8b42-18"})(["display:flex;gap:8px;color:",";"],e=>{let{theme:t}=e;return t.colors.caution});R.ZP.ul.withConfig({componentId:"sc-baee8b42-19"})(["color:",";padding-inline-start:16px;margin:0px;"],e=>{let{theme:t}=e;return t.colors.caution});let ei=R.ZP.div.withConfig({componentId:"sc-baee8b42-20"})(["display:flex;gap:16px;justify-content:center;flex-direction:column;&.landscape{width:50%;height:100%;}"]),eo=R.ZP.div.withConfig({componentId:"sc-f01145ab-0"})(["display:flex;align-items:center;cursor:pointer;border:1px solid ",";width:20px;height:20px;border-radius:50%;img{width:21px;height:21px;}"],e=>{let{theme:t}=e;return t.colors.white50});var er=e=>{let{selected:t}=e;return(0,i.jsx)(eo,{children:t&&(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[(0,i.jsx)("circle",{cx:"10.2348",cy:"10.2353",r:"10.4",fill:"#B3D661"}),(0,i.jsx)("path",{d:"M5.4679 9.96527L8.5368 13.3842C8.68912 13.5539 8.95501 13.5539 9.10733 13.3842L15.4346 6.33532",stroke:"white",strokeWidth:"1.51667",strokeLinecap:"round",strokeLinejoin:"round"})]})})},el={src:"/_next/static/media/cloudy-error.9a98e7de.webp",height:439,width:512,blurDataURL:"data:image/webp;base64,UklGRrwAAABXRUJQVlA4WAoAAAAQAAAABwAABgAAQUxQSDkAAAABYFNbW5uPDRHMzBym7iYncxTEQZxl7EVG71VEREwAEFH8cukZABVm1xqQ+PpN+r+h/OtEum7b1joAVlA4IFwAAAAQAgCdASoIAAcAAkA4JbACdAaTA2kFgLeAAP715m4ejeDvSx8x9dJdC8ktMJNJ5mffOgivkvzohTjCsz0vZDtMpX0Yf5kXqkHvs+E229KoiIwAyH2NqBn8j5AAAA==",blurWidth:8,blurHeight:7};let ec=R.ZP.div.withConfig({componentId:"sc-28f4bfb2-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:446px;width:100%;gap:32px;&.landscape{flex-direction:row;height:100%;}h3{color:",";font-size:24px;line-height:28px;font-weight:700;}"],e=>{let{theme:t}=e;return t.colors.white}),ea=R.ZP.img.withConfig({componentId:"sc-28f4bfb2-1"})(["width:128px;height:110px;"]),es=R.ZP.div.withConfig({componentId:"sc-28f4bfb2-2"})(["display:flex;flex-direction:column;align-items:center;width:100%;flex:1;"]),ed=R.ZP.div.withConfig({componentId:"sc-28f4bfb2-3"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;p{color:",";}h3{font-size:20px;}"],e=>{let{theme:t}=e;return t.colors.white70}),ep=R.ZP.div.withConfig({componentId:"sc-28f4bfb2-4"})(["margin:0px 16px;"]),eu=(0,R.ZP)(l.lU).attrs({as:"span"}).withConfig({componentId:"sc-28f4bfb2-5"})(["color:",";.link{color:",";cursor:pointer;}"],e=>{let{theme:t}=e;return t.colors.white70},e=>{let{theme:t}=e;return t.colors.link}),eh=R.ZP.div.withConfig({componentId:"sc-28f4bfb2-6"})(["display:flex;flex-direction:column;align-items:center;gap:20px;"]),eA=R.ZP.div.withConfig({componentId:"sc-28f4bfb2-7"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:32px;width:100%;&.landscape{width:50%;}"]),ex={cancel:{titleImg:el,titleText:"cancelTransaction",errorDesc:"confirmCancellation"},timeout:{titleImg:el,titleText:"paymentIncomplete",errorDesc:"paymentIncompleteDesc"},failure:{titleImg:{src:"/_next/static/media/cloudy-sad.10d3dc46.webp",height:513,width:512,blurDataURL:"data:image/webp;base64,UklGRr4AAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDQAAAABYBVJVqNHMoMQChs4QwhYSAIeIjJ/l09DREwA/NQxKABh2nFUI+zxavfbTm9ZOkQsXsInVlA4IGQAAACQAgCdASoIAAgAAkA4JbACdAYZfqAH6gGp+yljUAD+8uXdV9/KnNvCw1zLVsSioyQ9sSXsZK5/HUZ1zLQ/GX2/8rJhC+oqQOHuYtqfYa+WYZwV8dccKoXZX+Y+7QpI8+620WAA",blurWidth:8,blurHeight:8},titleText:"paymentFailed",errorDesc:"paymentFailedDesc"}};var eg=e=>{let{type:t,onClose:n,onNoCancellation:a,orderNo:s,orientation:d}=e,{t:p}=(0,o.$)(),u=ex[t],h=(0,b.tq)()&&!(0,b.Em)()&&!(0,b.zc)(),[A,x]=(0,r.useState)(d===I.cj.landscape&&h);return(0,r.useEffect)(()=>{x(d===I.cj.landscape&&h)},[d]),(0,i.jsxs)(ec,{className:"".concat(A?"landscape":""),children:[(0,i.jsxs)(eA,{className:"".concat(A?"landscape":""),children:[(0,i.jsx)(es,{children:(0,i.jsx)(ea,{src:(0,c.jW)(u.titleImg),alt:"error"})}),(0,i.jsxs)(ed,{children:[(0,i.jsx)(l.Bb,{children:p(u.titleText)}),(0,i.jsx)(l.TZ,{children:p(u.errorDesc)})]}),"failure"===t&&(0,i.jsxs)(ed,{children:[(0,i.jsx)(l.Bb,{style:{fontSize:"16",fontWeight:"600"},children:p("orderNo")}),(0,i.jsx)(l.TZ,{children:s})]})]}),(0,i.jsx)(eA,{children:(0,i.jsxs)(eh,{children:["cancel"!==t&&(0,i.jsxs)(ep,{children:[(0,i.jsx)(eu,{children:p("reachOutIfCharged")}),(0,i.jsxs)(eu,{style:{color:m.qm.colors.link},children:[" ",(0,i.jsx)("a",{className:"link",href:"mailto:store-support@now.gg",target:"_blank",rel:"noreferrer",children:"store-support@now.gg"})]})]}),(0,i.jsx)(g.z,{variant:"primary",size:"xlarge",onClick:n,children:p("cancel"===t?"confirm":"close")}),"cancel"===t&&(0,i.jsx)(g.z,{variant:"primaryOutline",size:"xlarge",onClick:a,children:p("dontCancel")})]})})]})},ef=n(85886);let em=R.ZP.div.withConfig({componentId:"sc-e21ec3c7-0"})(["display:flex;padding:0px 8px 32px 8px;flex-direction:column;align-items:center;gap:8px;align-self:stretch;border-bottom:1px solid ",";p{color:",";}button{max-width:190px;}"],e=>{let{theme:t}=e;return t.colors.white10},e=>{let{theme:t}=e;return t.colors.ascent});var ew=e=>{let{url:t}=e,{t:n}=(0,o.$)();return(0,i.jsxs)(em,{children:[(0,i.jsx)(l.lU,{children:n("noPaymentPage")}),(0,i.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",style:{width:"auto",textDecoration:"none"},children:(0,i.jsxs)(g.z,{variant:"primary",size:"medium",disabled:""===t,children:[n("showPaymentScreen"),(0,i.jsx)("img",{alt:"",loading:"lazy",src:(0,c.jW)(ef.Z),width:16,height:16})]})})]})},ey=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function l(e){try{a(i.next(e))}catch(e){r(e)}}function c(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(l,c)}a((i=i.apply(e,t||[])).next())})},eb=e=>{let{product:t,onFailure:n,source:Z,paymentsToken:E,paymentsGuid:R,paymentOptions:X,orientation:eo,isLandscapeModal:el,isNowBuxPaymentFlow:ec=!1,handlePurchaseNowBuxSuccess:ea=e=>{},nowBuxPaymentDetails:es,subscriptionId:ed}=e,{t:ep}=(0,o.$)(),[eu,eh]=(0,r.useState)(),[eA,ex]=(0,r.useState)(!0),ef=104*Math.PI,[em,eb]=(0,r.useState)(599),ev=(0,r.useRef)(599);ev.current=em;let[ej,eP]=(0,r.useState)(!1),[eI,eC]=(0,r.useState)(""),[eS,ek]=(0,r.useState)("".concat(parseInt("".concat(em/60),10)," : ").concat(em%60<10?"0":"").concat(em%60)),eT=(0,r.useRef)(),[eU,eZ]=(0,r.useState)(""),eN=(0,C.I0)(),eE=(0,C.v9)(e=>e.play.paymentAppId),eQ=(0,C.v9)(e=>e.play.nowPremiumSubscriptionActive),[eB,eR]=(0,r.useState)("");!(0,b.tq)()||(0,b.Em)()||(0,b.zc)();let[eD,eL]=(0,r.useState)(((eo===I.cj.landscape?Q()([window.innerHeight,window.innerWidth]):N()([window.innerHeight,window.innerWidth]))||window.innerHeight)-56),eW=(0,C.v9)(e=>e.play.paymentInProgress),eH=()=>{eL(((eo===I.cj.landscape?Q()([window.innerHeight,window.innerWidth]):N()([window.innerHeight,window.innerWidth]))||window.innerHeight)-56)},ez=e=>{if(!S.default.getState().play.paymentInProgress)return null;let t="Your Payment won't be completed";return e.returnValue=t,e.preventDefault(),t};(0,r.useEffect)(()=>((0,U.L9)("PaymentMethodSelectionDisplayed",{nowPassSource:Z,planType:t.type}),window.addEventListener("resize",eH),window.addEventListener("orientationchange",eH),window.addEventListener("beforeunload",ez),()=>{window.removeEventListener("resize",eH),window.removeEventListener("orientationchange",eH),window.removeEventListener("beforeunload",ez)}),[]),(0,r.useEffect)(()=>{eH()},[eo]),(0,r.useEffect)(()=>{!eu&&X.length>0&&eh(X[0])},[X]);let e_=()=>(0,b.no)("np",18).toLowerCase(),eJ=(e,n)=>{let i="".concat(P.default.appInfo.paymentBaseRedirectHost,"/user/payment/iappay.html#&").concat(new URLSearchParams({payType:"".concat((null==eu?void 0:eu.id)||0),payName:"".concat((null==eu?void 0:eu.payType)||0),productId:"".concat(t.productId),orderNo:e,countryCode:P.default.countryCode||"IN",CountryRegionCode:P.default.countryCode||"IN",postalCode:"OTHERS",subscriptionId:n,guid:R||"",appid:t.appId,inGameId:"null",deviceType:(0,b.zj)().feDeviceType,platform:"cloud"}).toString());eZ(i),window.open(i,"_blank","noopener")},eO=e=>ey(void 0,void 0,void 0,function*(){var n,i;if(eb(e=>e-1),ev.current%10==0){let o;try{if((o=yield v.Z.pollPaymentStatus({},{appId:P.default.appInfo.appId,channel:"nowgg_cloud",orderNo:e,timestamp:Date.now(),token:E})).success&&o.data.INAPP_PURCHASE_STATUS){if(eT.current&&clearInterval(eT.current),o.data.INAPP_PURCHASE_STATUS.toString()===j.L0_.success){if(ec){ea(e);return}(0,b.FA)(!1);let r=yield(0,T.p8)({productId:t.productId,orderNumber:e,purchaseToken:null===(i=null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.INAPP_PURCHASE_DATA)||void 0===i?void 0:i.purchaseToken,token:E});if(r.status===I.YR.Success)(0,b.FA)(!0),eN({type:k.Z.NOWPREMIUM_SUBSCRIPTION_STATUS,payload:{nowPremiumSubscriptionActive:!0,showSubscriptionEnabledModal:!0,showSubscriptionModal:!1,paymentInProgress:!1}}),(0,T.$f)(r.subscriptionInfo);else throw Error("confirmSubscription API error: ".concat(JSON.stringify(r)))}else o.data.INAPP_PURCHASE_STATUS.toString()===j.L0_.fail&&(eC("failure"),eP(!0))}}catch(e){(0,h.ZP)(Error("pollPaymentStatus or confirmSubscription API error: ".concat(e)),{error:e})}}}),eF=()=>ey(void 0,void 0,void 0,function*(){var e;try{let n;if(eW||eQ||!ed)return;(0,U.L9)("PayNowClicked",{nowPassSource:Z,planType:t.type,paymentProvider:null==eu?void 0:eu.payType}),eN({type:k.Z.SET_PAYMENT_STATUS,payload:{paymentInProgress:!0}});try{if(!(n=yield(0,B.vj)(t,E,(null==eu?void 0:eu.id)||0,(null==es?void 0:es.nowbuxDiff)||"")).success){if(1607===n.code&&(yield(0,T.sR)(eE,E)))return;throw Error("success false: ".concat(n))}}catch(e){throw Error("createNowBuxOrder API error: ".concat(e))}eJ(null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.orderNo,ed),eT.current=setInterval(()=>{var e;eO(null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.orderNo)},1e3)}catch(e){(0,h.ZP)(Error("initiateNowBuxPurchase failed: ".concat(e)),{error:e})}}),eq=()=>ey(void 0,void 0,void 0,function*(){var e,n,i,o;if(!S.default.getState().play.paymentInProgress&&!S.default.getState().play.nowPremiumSubscriptionActive){(0,U.L9)("PayNowClicked",{nowPassSource:Z,planType:t.type,paymentProvider:null==eu?void 0:eu.payType}),eN({type:k.Z.SET_PAYMENT_STATUS,payload:{paymentInProgress:!0}});try{let r;let l=e_();try{if((r=yield v.Z.createOrder({},{appId:eE,channelName:"nowgg_cloud",channel:"nowgg_cloud",countryRegionCode:"OTHERS",countryCode:P.default.countryCode||"IN",payType:(null==eu?void 0:eu.id)||0,postalCode:"OTHERS",productId:t.productId,timestamp:Date.now(),token:E,developerPayload:l})).success)(0,U.L9)(j.Wes,{payType:"".concat((null==eu?void 0:eu.id)||0),payName:"".concat((null==eu?void 0:eu.payType)||0),productId:"".concat(t.productId),orderNo:null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.orderNo,countryCode:P.default.countryCode||"IN",CountryRegionCode:P.default.countryCode||"IN",postalCode:"OTHERS",guid:R||"",appid:t.appId,deviceType:(0,b.zj)().feDeviceType,paymentsToken:E,paymentsGuid:R,subscriptionId:l}),eR(null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.orderNo);else{if(1607===r.code&&(yield(0,T.sR)(eE,E)))return;throw Error("createOrder API error: ".concat(JSON.stringify(r)))}}catch(e){throw Error("createOrder API error: ".concat(e))}let{status:c,subscriptionInfo:a}=(yield(0,B.r0)(t,E,null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.orderNo,l))||{};if(c===I.KS.SubscriptionAlreadyInitiated&&a&&(yield(0,T.sR)(null==a?void 0:a.subscriptionAppId,E)))return;eJ(null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.orderNo,l),eT.current=setInterval(()=>{var e;eO(null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.orderNo)},1e3)}catch(e){(0,h.ZP)(Error("Exception in Payment popup"),{error:e})}}}),eV=()=>{ec?eF():eq()};return(0,r.useEffect)(()=>{ek("".concat(parseInt("".concat(em/60),10)," : ").concat(em%60<10?"0":"").concat(em%60)),0===em&&(eT.current&&clearInterval(eT.current),eP(!0),eC("timeout"))},[em]),(0,i.jsxs)(D,{className:"".concat(el?"landscape":""," ").concat((null===P.default||void 0===P.default?void 0:P.default.isJpHomePage)?"jpHomePage":""),children:[(0,i.jsxs)(L,{className:"".concat(el?"landscape":""," ").concat((null===P.default||void 0===P.default?void 0:P.default.isJpHomePage)?"jpHomePage":""),children:[(0,i.jsx)("img",{src:(0,c.jW)(A.Z),alt:"",style:{width:"128px",height:"34px"}}),!eW&&(0,i.jsx)(x.Z,{name:"cross-thin",size:16,onClick:()=>{eC("cancel"),eP(!0)}})]}),(0,i.jsx)(W,{className:"".concat(el?"landscape":""," ").concat(eD<330?"small":""),children:ej?(0,i.jsx)(eg,{type:eI,onNoCancellation:()=>{eP(!1)},onClose:()=>{eP(!1),eN({type:k.Z.SET_PAYMENT_STATUS,payload:{paymentInProgress:!1}}),n()},orderNo:eB,orientation:eo}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ei,{className:"".concat(el?"landscape":""),children:[(el&&!eW||!el)&&(0,i.jsxs)(z,{className:"".concat(el?"landscape":""),children:[(0,i.jsxs)(H,{paymentInProgress:eW,className:"\n                      ".concat(ec?"purchase-now-bux":""," \n                      ").concat(el?"landscape paymentTypes":""," \n                      ").concat(eD<330?"row":"","\n                      "),children:[ec?(0,i.jsx)("img",{className:"now-bux-img",height:"32px",src:(0,c.jW)(p.Z),alt:""}):(0,i.jsx)("img",{className:"now-prime-img",src:(0,c.jW)(y.Z),alt:""}),(0,i.jsxs)(_,{children:[ec?(0,i.jsxs)(l.Gb,{children:[null==es?void 0:es.nowbuxDiff," ","nowBux"]}):(0,i.jsx)(l.Gb,{children:ep("nowPrime")}),!ec&&(0,i.jsx)(l.lU,{style:{textTransform:"capitalize"},children:"".concat(ep(t.type)," ").concat(ep("pass"))})]}),!eW&&(0,i.jsx)(l.AC,{children:ec?"".concat(null==es?void 0:es.symbol).concat(null==es?void 0:es.nowbuxDiffLocalPrice):"".concat(t.currencySymbol).concat(t.offerPrice)})]}),!eW&&(0,i.jsx)(l.gd,{style:el?{}:{alignSelf:"baseline",marginLeft:60},children:ep((null===P.default||void 0===P.default?void 0:P.default.isJpHomePage)?"cancelToRefund":"subscriptionNotAutoRenew")})]}),!el&&(0,i.jsx)(F,{}),eW?(0,i.jsxs)(i.Fragment,{children:[!el&&(0,i.jsxs)(V,{children:[(0,i.jsx)(l.Bb,{children:ep("paymentPending")}),(0,i.jsx)(l.TZ,{children:ep("completePayment")})]}),el&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(H,{paymentInProgress:eW,className:"".concat(el?"landscape":""),children:[(0,i.jsx)("img",{src:(0,c.jW)(y.Z),alt:""}),(0,i.jsxs)(_,{children:[(0,i.jsx)(l.Gb,{children:ep("nowPrime")}),(0,i.jsx)(l.lU,{style:{textTransform:"capitalize"},children:"".concat(ep(t.type)," ").concat(ep("pass"))})]}),!eW&&(0,i.jsx)(l.AC,{children:"".concat(t.currencySymbol).concat(t.offerPrice)})]}),(0,i.jsx)(F,{})]}),(0,i.jsxs)(Y,{className:"".concat(el?"landscape-modal":""),children:[(0,i.jsx)(l.AC,{children:eS}),(0,i.jsx)(l.TZ,{children:ep("mins")}),(0,i.jsx)("svg",{children:(0,i.jsx)("circle",{cx:52,cy:52,r:52,fill:"none",stroke:m.qm.colors.white30,strokeWidth:12})}),(0,i.jsx)("svg",{children:(0,i.jsx)("circle",{strokeDasharray:ef,strokeDashoffset:ef-em/599*ef,r:52,cx:52,cy:52,fill:"none",stroke:m.qm.colors.ascent,strokeWidth:12})})]}),el&&(0,i.jsxs)(V,{className:"".concat(el?"landscape":""),children:[(0,i.jsx)(l.Bb,{children:ep("paymentPending")}),(0,i.jsx)(l.TZ,{children:ep("completePayment")})]}),!el&&(0,i.jsx)(ew,{url:eU}),!el&&(0,i.jsxs)(G,{children:[(0,i.jsx)(l.gd,{style:{color:"#FA832D"},children:ep("pleaseDontCloseTab")}),(0,i.jsxs)(M,{children:[(0,i.jsx)(w.Z,{}),(0,i.jsx)(l.QV,{children:ep("checkingStatus")})]}),(0,i.jsxs)(M,{children:[(0,i.jsx)(l.lU,{children:ep("contact")}),(0,i.jsx)("a",{href:"mailto:support@now.gg",children:(0,i.jsx)(l.lU,{style:{color:m.qm.colors.link},children:"support@now.gg"})}),(0,i.jsx)(l.lU,{children:ep("help")})]})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(J,{children:[!el&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.TZ,{style:{color:m.qm.colors.white},children:ep("paymentMethods")}),(0,i.jsx)($,{children:X.length>0?X.map(e=>{var t,n;let o=null===(n=null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.replaceAll(" ",""),r=ep(o)!==o;return(0,i.jsxs)(O,{onClick:()=>eh(e),className:eu!==e?"":"selected",children:[(0,i.jsx)("img",{src:e.logo,alt:""}),(0,i.jsx)(l.lU,{children:r?ep(o):e.name}),(0,i.jsx)(er,{selected:eu===e})]})}):(0,i.jsx)(K,{alt:"".concat(ep("roundLoader")),src:(0,c.jW)(a.Z)})})]}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(et,{src:(0,c.jW)(s)}),(0,i.jsx)(et,{src:(0,c.jW)(d)})]})]}),!el&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(q,{children:[(0,i.jsx)(f.Jg,{onChange:e=>ex(e.target.checked),checked:eA,children:(0,i.jsx)(l.gd,{children:ep("termsAccepted")})}),(0,i.jsx)(l.rU,{style:{fontSize:12,flex:1},target:"_blank",rel:"noopener noreferrer",href:"https://now.gg/terms-and-privacy.html#terms",children:ep("termsOfUse")})]}),(0,i.jsx)(g.z,{variant:"primary",disabled:!eA||eQ||!eu,size:"xlarge",onClick:eV,children:ec?"".concat(ep("pay")," \n                          ").concat(null==es?void 0:es.symbol).concat(null==es?void 0:es.nowbuxDiffLocalPrice):"".concat(ep("pay")," ").concat(t.currencySymbol).concat(t.offerPrice)})]}),(0,i.jsxs)(en,{children:[(0,i.jsx)("img",{src:(0,c.jW)(u),alt:ep("info"),width:16,height:16}),(0,i.jsx)(l.gd,{children:ep("redirectForPayment")})]})]})]}),el&&(0,i.jsx)(ei,{className:"".concat(el?"landscape":""),children:eW?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ew,{url:eU}),(0,i.jsxs)(G,{children:[(0,i.jsx)(l.gd,{style:{color:"#FA832D"},children:ep("pleaseDontCloseTab")}),(0,i.jsxs)(M,{children:[(0,i.jsx)(w.Z,{}),(0,i.jsx)(l.QV,{children:ep("checkingStatus")})]}),(0,i.jsxs)(M,{children:[(0,i.jsx)(l.lU,{children:ep("contact")}),(0,i.jsx)("a",{href:"mailto:support@now.gg",children:(0,i.jsx)(l.lU,{style:{color:m.qm.colors.link},children:"support@now.gg"})}),(0,i.jsx)(l.lU,{children:ep("help")})]})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.TZ,{style:{color:m.qm.colors.white},children:ep("paymentMethods")}),(0,i.jsx)($,{children:X.length>0?X.map(e=>(0,i.jsxs)(O,{onClick:()=>eh(e),className:eu!==e?"":"selected",children:[(0,i.jsx)("img",{src:e.logo,alt:""}),(0,i.jsx)(l.lU,{children:e.name}),(0,i.jsx)(er,{selected:eu===e})]})):(0,i.jsx)(K,{alt:"".concat(ep("roundLoader")),src:(0,c.jW)(a.Z)})}),(0,i.jsxs)(q,{children:[(0,i.jsx)(f.Jg,{onChange:e=>ex(e.target.checked),checked:eA,children:(0,i.jsx)(l.gd,{children:ep("termsAccepted")})}),(0,i.jsx)(l.rU,{style:{fontSize:12,flex:1},target:"_blank",rel:"noopener noreferrer",href:"https://now.gg/terms-and-privacy.html#terms",children:ep("termsOfUse")})]}),(0,i.jsx)(g.z,{variant:"primary",disabled:!eA||eQ||!eu,size:"xlarge",onClick:eV,children:ec?"".concat(ep("pay")," \n                          ").concat(null==es?void 0:es.symbol).concat(null==es?void 0:es.nowbuxDiffLocalPrice):"".concat(ep("pay")," ").concat(t.currencySymbol).concat(t.offerPrice)})]})})]})})]})}},89803:function(e,t,n){"use strict";var i=n(67294),o=n(77621),r=n(15431),l=n(81043),c=n(77289),a=n(51315),s=n(82492),d=n(64489),p=n(44314);t.Z=function(e){let{source:t}=e,[n,u]=(0,i.useState)(!1),h=(0,l.v9)(e=>e.play.availableNowPasses),[A,x]=(0,i.useState)(h[0]),[g,f]=(0,i.useState)(""),[m,w]=(0,i.useState)(""),[y,b]=(0,i.useState)([]),v=(0,l.v9)(e=>e.play.paymentAppId),j=(0,l.I0)();(0,i.useEffect)(()=>{(0,r.L9)("NowPassPlanViewed",{nowPassSource:t}),h.length<1&&j(d.lM)},[]),(0,i.useEffect)(()=>{(null==h?void 0:h.length)>1&&x(h[0])},[null==h?void 0:h.length]),(0,i.useEffect)(()=>{v&&(()=>{var e,t,n,i;return e=this,t=void 0,n=void 0,i=function*(){var e;let t;let n=s.default.getState().play.paymentAppId;try{if(!(t=yield(0,p.uL)(n)).success)throw Error("silenceCallback API error: ".concat(JSON.stringify(t)));f(t.data.token),w(t.data.guid)}catch(e){throw Error("silenceCallback API error: ".concat(e))}let i=yield a.Z.payTypeSupportedList({},Object.assign({appId:n,channelName:"nowgg_cloud",clientType:5,countryRegionCode:"OTHERS",countryCode:o.default.countryCode||"US",flag:2,token:t.data.token,useType:2,channel:"nowgg_cloud"},(null===o.default||void 0===o.default?void 0:o.default.isJpHomePage)&&(null===(e=h[0])||void 0===e?void 0:e.category)==="subscription"?{type:"subs"}:{}));i.success&&b(i.data.data)},new(n||(n=Promise))(function(o,r){function l(e){try{a(i.next(e))}catch(e){r(e)}}function c(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(l,c)}a((i=i.apply(e,t||[])).next())})})()},[v]);let P=(0,i.useCallback)(e=>{x(e),u(!0),(0,r.L9)(c.kdG,{planType:e.type,nowPassSource:t})},[t]);return{setShowPaymentModal:u,selectedPass:A,paymentsToken:g,paymentsGuid:m,paymentOptions:y,handleSubscriptionPlanClicked:P,showPaymentModal:n,availableNowPasses:h}}}}]);
//# sourceMappingURL=4522.f6111921892202ca.js.map