"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7078],{7078:function(e,t,n){n.r(t),n.d(t,{NerdModeComponent:function(){return N},default:function(){return H}});var o=n(85893),i=n(67294),r=n(4374),a=n(1857),c=n(81043),d=n(82492),s=n(36716),l=n(27633),p=n(94183),u=n(36887),m=n(17609),x=n(85433),f=n(68784),g=n(77289),h=n(77621),v=n(57833),y=n(6685);let w=v.ZP.div.withConfig({componentId:"sc-594d3038-0"})(["position:relative;"]),P=v.ZP.div.withConfig({componentId:"sc-594d3038-1"})(["position:absolute;background:rgba(0,0,0,0.8);color:",";display:inline-block;left:50%;top:5px;transform:translateX(-50%);z-index:10;width:fit-content;padding:8px 16px;border:",";"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.border.base}),b=v.ZP.div.withConfig({componentId:"sc-594d3038-2"})(["position:absolute;z-index:20;max-width:459px;top:60px;background:rgba(0,0,0,0.8);box-shadow:",";border-radius:0 6px 0 6px;padding:12px 16px 15px;pointer-events:none;@media screen and (orientation:portrait) and (max-width:600px),(orientation:landscape) and (max-height:575.98px){transform:scale(.7);transform-origin:top left;}"],e=>{let{theme:t}=e;return t.shadow.big}),j=v.ZP.p.withConfig({componentId:"sc-594d3038-3"})(["letter-spacing:0.05em;font-weight:500;color:",";opacity:0.8;margin-bottom:8px;margin-top:5px;font-size:12px;line-height:15px;"],e=>{let{theme:t}=e;return t.colors.white}),k=v.ZP.div.withConfig({componentId:"sc-594d3038-4"})(["display:flex;flex-direction:row;"]),C=v.ZP.div.withConfig({componentId:"sc-594d3038-5"})(["display:flex;margin-left:auto;cursor:pointer;pointer-events:auto;span{margin-left:10px;}"]),S=v.ZP.div.withConfig({componentId:"sc-594d3038-6"})(["border-bottom:1px solid rgba(255,255,255,0.1);"]),I=v.ZP.div.withConfig({componentId:"sc-594d3038-7"})(["color:",";display:grid;margin-top:5px;grid-template-columns:111px 14px 302px;div:nth-child(2){margin:0px 4px;text-align:center;}p{font-size:11px;}"],e=>{let{theme:t}=e;return t.colors.white}),R=v.ZP.div.withConfig({componentId:"sc-594d3038-8"})(["display:flex;color:",";margin-top:8px;div:nth-child(2){margin:0px 4px;text-align:center;}"],e=>{let{theme:t}=e;return t.colors.white}),Z=v.ZP.div.withConfig({componentId:"sc-594d3038-9"})(["color:",";display:grid;margin-top:8px;grid-template-columns:200px 200px;"],e=>{let{theme:t}=e;return t.colors.white}),T=(0,v.ZP)(y.__).withConfig({componentId:"sc-594d3038-10"})(["> span:before{background-color:",";}> span{border-color:",";}"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.colors.white}),N=()=>{let{t:e}=(0,r.$)(),t=(0,c.I0)(),[n,v]=(0,i.useState)(["platform","appPackage","country","connectionState","ping","currentResolution","framesPerSecond","clientID","sessionID","buildVersion"]),y=(0,i.useContext)(m.Z),N=(0,c.v9)(e=>e.play.peerConnectionState),H=(0,c.v9)(e=>e.play.peerConnection),z=(0,c.v9)(e=>e.play.isNerdMode),E=(0,c.v9)(e=>e.play.tpEnabled),F=d.default.getState(),M="",D="",B="",_="",{videoRef:A}=F.play;A&&A.current&&(D=A.current.offsetHeight.toString(),M=A.current.offsetWidth.toString());let L=h.default.countryCode||"-",V=["bitrate","codec","packets"],O=new Map([["bitrate","videoBitrate"],["codec","videoCodec"],["packets","videoPackets"]]),Q=new Map([["bitrate","audioBitrate"],["codec","audioCodec"],["packets","audioPackets"]]),W=(0,p.zj)(),[q,G]=(0,i.useState)(new Map([["platform","".concat(null==W?void 0:W.feDeviceType," ~ ").concat(null==W?void 0:W.feOsName)],["appPackage",y.packageName],["country",L],["connectionState",N||"NA"],["ping","0ms"],["currentResolution",""],["framesPerSecond","0"],["clientID",(0,p.Fz)(g.nPo)],["sessionID",(0,p.io)(g.K3T)],["buildVersion","".concat(x.f4," ~ ").concat(x._s)],["viewport",""],["devicePixelRatio",""],["frames",""],["videoBitrate",""],["videoCodec",""],["videoPackets",""],["audioBitrate",""],["audioCodec",""],["audioPackets",""]])),[K,X]=(0,i.useState)({}),[$,J]=(0,i.useState)(!1),[U,Y]=(0,i.useState)(0),ee=(0,i.useRef)(null),et=(0,c.v9)(e=>e.ads.inGameAd);function en(e){let t=parseInt(e,10);return t&&t>0?"".concat(parseInt((t/1e3).toString(),10)," kHz"):"0 kHz"}function eo(e){let t=parseInt(e,10);return t&&t>0?"".concat(parseFloat((t/1e3).toString()).toFixed(2)," kbps"):"0 kbps"}function ei(t){var n,o,i,r,a,c;let d=null===(o=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.connection)||void 0===o?void 0:o.currentRoundTripTime,s=null===(r=null===(i=t.data)||void 0===i?void 0:i.video)||void 0===r?void 0:r.inbound[0],l=null===(c=null===(a=t.data)||void 0===a?void 0:a.audio)||void 0===c?void 0:c.inbound[0],p=s.frameWidth&&s.frameHeight?"".concat(s.frameWidth," x ").concat(s.frameHeight):"",u=!!s.framesPerSecond&&s.framesPerSecond,m="".concat(s.mimeType||"NA","-").concat(en(s.clockRate||"0")),x="".concat(l.mimeType||"NA","-").concat(en(l.clockRate||"0")),f=s?eo(s.bitrate):eo("0"),g=l?eo(l.bitrate):eo("0"),h="".concat(s.packetsLost||"0"," ").concat(e("frameLost")," ").concat(s.packetsReceived||"0"),v="".concat(l.packetsLost||"0"," ").concat(e("frameLost")," ").concat(l.packetsReceived||"0");G(e=>{let t=new Map(e);return d&&t.set("ping","".concat(parseFloat((1e3*d).toString()).toFixed(2),"ms")),p?t.set("currentResolution",p):t.delete("currentResolution"),u?t.set("framesPerSecond",u):t.delete("framesPerSecond"),m?t.set("videoCodec",m):t.delete("videoCodec"),x?t.set("audioCodec",x):t.delete("audioCodec"),f?t.set("videoBitrate",f):t.delete("videoBitrate"),g?t.set("audioBitrate",g):t.delete("audioBitrate"),h?t.set("videoPackets",h):t.delete("videoPackets"),v?t.set("audioPackets",v):t.delete("audioPackets"),t})}(0,i.useEffect)(()=>{if(z){if((0,f.qO)("1"),H instanceof RTCPeerConnection){let e;K instanceof s.Q?e=K:X(e=new s.Q({getStatsInterval:1e3}));try{e.addPeer({pc:H,peerId:"1"}),e.on("stats",ei)}catch(e){(0,x.ZP)(e)}}}else K instanceof s.Q&&(K.removePeer("1"),K.removeListener("stats",ei),(0,f.qO)("0"));return()=>{K instanceof s.Q&&(K.removePeer("1"),K.removeListener("stats",ei))}},[z]),(0,i.useEffect)(()=>{G(e=>(e.set("connectionState",N||"NA"),e.set("clientID",(0,p.Fz)(g.nPo)||""),e.set("sessionID",(0,p.io)(g.K3T)||""),e))},[N]),(0,i.useEffect)(()=>{7===U&&(v(e=>[...e,"viewport","devicePixelRatio","frames"]),ee.current=setInterval(()=>{!function(){if(A&&A.current){let t=A.current.getVideoPlaybackQuality();0!==t.totalVideoFrames&&U>=7&&(B=t.totalVideoFrames.toString(),_=t.droppedVideoFrames.toString(),G(t=>{let n=new Map(t);return n.set("frames","".concat(_," ").concat(e("frameDrop")," ").concat(B)),n}))}}()},1e3),G(e=>(e.set("viewport","".concat(D," x ").concat(M)),e.set("devicePixelRatio",parseFloat(window.devicePixelRatio.toString()).toFixed(2)),e)))},[U]);let er=e=>{(0,f.CE)(e?"0":"1"),t({type:l.Z.TP_ENABLED,payload:{tpEnabled:!e}})};return(0,o.jsxs)(w,{children:[$&&(0,o.jsx)(P,{children:(0,o.jsx)(a.kk,{style:{margin:0},children:e("copiedToClipboard")})}),z&&(0,o.jsxs)(b,{style:et===g.ush?{top:0}:{},children:[(0,o.jsxs)(k,{style:{color:"white"},children:[(0,o.jsx)(a.T6,{med:!0,style:{margin:0},children:e("nerdMode")}),(0,o.jsxs)(C,{children:[(0,o.jsx)(u.Z,{name:"copy",onClick:()=>(function(){var t,n,o,i;return t=this,n=void 0,o=void 0,i=function*(){let t="";Y(U+1),q.forEach((n,o)=>{t+="".concat(e(o)," : ").concat(n,"\n")});try{yield navigator.clipboard.writeText(t),J(!0),setTimeout(()=>{J(!1)},2e3)}catch(e){}},new(o||(o=Promise))(function(e,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function c(e){try{d(i.throw(e))}catch(e){r(e)}}function d(t){var n;t.done?e(t.value):((n=t.value)instanceof o?n:new o(function(e){e(n)})).then(a,c)}d((i=i.apply(t,n||[])).next())})})(),size:18}),(0,o.jsx)(u.Z,{name:"divider",size:18}),(0,o.jsx)(u.Z,{id:"ng-nerd-close",name:"cross-thin",onClick:()=>void(Y(0),clearInterval(ee.current),G(e=>{let t=new Map(e);return t.delete("frames"),t.delete("viewport"),t.delete("devicePixelRatio"),t}),v(e=>e.filter(e=>"frames"!==e&&"viewport"!==e&&"devicePixelRatio"!==e)),t({type:l.Z.START_CONNECTION,payload:{isNerdMode:!1}})),size:18})]})]}),(0,o.jsx)(j,{children:e("nerdModeDescription")}),(0,o.jsx)(S,{}),n.map(t=>{var n,i;return(0,o.jsxs)(I,{children:[(0,o.jsx)(a.mH,{style:{textAlign:"right",margin:0,fontWeight:400},children:e(t)}),(0,o.jsx)("div",{children:":"}),(0,o.jsx)(a.mH,{...(n="connectionState"===t,i=q.get(t),n?"connected"===i?{lightGreen:!0}:{red:!0}:{}),style:{letterSpacing:"0.05em",opacity:.8,margin:0},children:q.get(t)||""})]},t)}),(0,o.jsxs)("div",{style:{color:"white",display:"flex",justifyContent:"space-between",margin:"10px 0px 0"},children:[(0,o.jsx)(a.mH,{style:{margin:0,fontSize:11,fontWeight:400},children:(0,o.jsx)("strong",{children:e("tp.toggle")})}),(0,o.jsxs)(T,{id:"ng-touch-points",style:{pointerEvents:"auto"},children:[(0,o.jsx)("input",{type:"checkbox",checked:E,onChange:()=>er(E)}),(0,o.jsx)("span",{})]})]}),U>=7&&(0,o.jsxs)("div",{style:{marginTop:"8px"},children:[(0,o.jsx)(S,{}),(0,o.jsxs)(Z,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(a.mH,{style:{opacity:.8,margin:0},children:e("video")}),V.map(t=>(0,o.jsxs)(R,{children:[(0,o.jsx)(a.mH,{style:{margin:0},children:e(t)})," ",(0,o.jsx)("div",{children:":"})," ",(0,o.jsx)(a.mH,{style:{opacity:.8,margin:0},children:q.get(O.get(t)||"")})]}))]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(a.mH,{style:{opacity:.8,margin:0},children:e("audio")}),V.map(t=>(0,o.jsxs)(R,{children:[(0,o.jsx)(a.mH,{style:{margin:0},children:e(t)})," ",(0,o.jsx)("div",{children:":"})," ",(0,o.jsx)(a.mH,{style:{opacity:.8,margin:0},children:q.get(Q.get(t)||"")})]}))]})]})]})]})]})};var H=N}}]);
//# sourceMappingURL=7078.e8fbe499c7b71ff6.js.map